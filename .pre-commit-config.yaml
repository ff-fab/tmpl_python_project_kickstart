# Pre-commit hooks: Automated checks before each commit
# Install: pre-commit install
# Run manually: pre-commit run --all-files

repos:
  # EditorConfig: Validate all files match .editorconfig settings
  - repo: https://github.com/editorconfig-checker/editorconfig-checker.python
    rev: 3.2.1
    hooks:
      - id: editorconfig-checker
        name: EditorConfig (whitespace & encoding)
        alias: ec
        exclude: '\.md$' # Prettier handles markdown formatting

  # Basic checks (trailing whitespace, YAML validity, etc.)
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v6.0.0
    hooks:
      - id: trailing-whitespace
        name: Trim trailing whitespace
      - id: end-of-file-fixer
        name: Fix end of file
      - id: check-yaml
        name: Check YAML syntax
        args: ['--unsafe']
      - id: check-json
        name: Check JSON syntax
        exclude: '(\.devcontainer/devcontainer\.json|\.vscode/settings\.json)$'
      - id: check-toml
        name: Check TOML syntax
      - id: check-merge-conflict
        name: Check for merge conflicts
      - id: detect-private-key
        name: Detect private keys

  # Codespell: Catch common misspellings across the entire repo
  - repo: https://github.com/codespell-project/codespell
    rev: v2.4.1
    hooks:
      - id: codespell
        name: Codespell (spell check)
        args: ['--ignore-words-list', 'hass']
        exclude: |
          (?x)^(
            .*\.lock
          )$

  # Prettier: Format JavaScript, TypeScript, JSON, Markdown, YAML
  - repo: https://github.com/pre-commit/mirrors-prettier
    rev: v3.1.0 # Keep v3 stable; v4 is alpha
    hooks:
      - id: prettier
        name: Prettier (JS, TS, JSON, MD, YAML)
        types_or:
          - javascript
          - jsx
          - ts
          - tsx
          - json
          - markdown
          - yaml
        exclude: \.vscode/settings\.json$

  # Ruff: Lint and format Python
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.15.0
    hooks:
      - id: ruff
        name: Ruff (lint Python)
        args: ['--fix']
      - id: ruff-format
        name: Ruff (format Python)

  # mypy: Type checking for Python
  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.19.1
    hooks:
      - id: mypy
        name: mypy (type check Python)
        args: ['--strict']
        additional_dependencies:
          - pytest
          - pydantic-settings

# Configuration options
default_language_version:
  python: python3.14

fail_fast: false # Run all hooks, don't stop at first failure
