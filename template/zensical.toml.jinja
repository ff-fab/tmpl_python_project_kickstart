# Documentation site configuration (native Zensical format)
#
# Zensical is a documentation framework by the creators of Material for MkDocs.
# This file replaces mkdocs.yml with native TOML configuration.
#
# Usage (via Taskfile — single source of truth for tool commands):
#   task docs:serve       # Local preview with hot reload
#   task docs:build       # Build static site to site/
#
{% if docs_style == "diataxis" -%}
# Structure follows the Diátaxis framework:
#   Tutorials   — learning-oriented (getting started)
#   How-To      — task-oriented (specific goals)
#   Reference   — information-oriented (API, config, ADRs)
#   Explanation — understanding-oriented (architecture, design)
{% elif docs_style == "dita" %}
# Structure follows a DITA-style information typing:
#   Tasks     — action-oriented (procedures: how to do something)
#   Concepts  — understanding-oriented (what/why, mental model)
#   Reference — information-oriented (facts: parameters, schemas, APIs)
#   (Optional) Troubleshooting — problem-oriented (symptoms → causes → fixes)
{% elif docs_style == "user-journey" %}
# Structure follows a user-journey (lifecycle) model:
#   Get Started     — onboarding-oriented (first success quickly)
#   Install/Setup   — environment-oriented (prereqs, installation, config)
#   Use             — outcome-oriented (common end-to-end flows)
#   (Optional) Operate — operations-oriented (deploy, monitor, upgrade, security)
#   (Optional) Troubleshoot — recovery-oriented (diagnosis, known issues, fixes)
#   Reference       — lookup-oriented (API/CLI/config, schemas)
{% elif docs_style == "architecture" %}
#   Overview        — system-oriented (what it is, key concepts)
#   Core            — foundation-oriented (shared primitives/behavior)
#   Components      — module-oriented (each feature/service/package area)
#   (Optional) Integrations — boundary-oriented (connectors, adapters, external systems)
#   APIs/Interfaces — contract-oriented (REST/CLI/events, schemas)
#   (Optional) Operations — run-oriented (deployment, scaling, monitoring)
#   Reference       — detail-oriented (configuration, parameters, ADRs)
{%- endif %}

# ---------------------------------------------------------------------------
# Project
# ---------------------------------------------------------------------------

[project]
site_name = "{{ project_name }}"
site_description = "{{ description }}"

# Canonical URL for the deployed site. Used for sitemap and social cards.
# Note: zensical.toml does not support environment variable substitution.
# The CI workflow hardcodes the same URL, so this is the single source of truth.
site_url = "https://ff-fab.github.io/{{ repo_name }}/"

repo_url = "https://github.com/ff-fab/{{ repo_name }}"
repo_name = "ff-fab/{{ repo_name }}"
edit_uri = "edit/main/docs/"

# ---------------------------------------------------------------------------
# Navigation
# ---------------------------------------------------------------------------

nav = [
    { "Home" = "index.md" },
]

# Note: exclude_docs is not yet supported in zensical.toml (see Zensical docs).
# The TODO/, demos/, and testing/ directories may appear as unlisted pages.

# ---------------------------------------------------------------------------
# Theme
# ---------------------------------------------------------------------------

[project.theme]
# Zensical's modern design (the default). Use variant = "classic" to restore
# the Material for MkDocs appearance.
features = [
    "navigation.tabs",
    "navigation.tabs.sticky",
    "navigation.sections",
    "navigation.expand",
    "navigation.indexes",
    "navigation.top",
    "search.suggest",
    "search.highlight",
    "content.code.copy",
    "content.code.annotate",
    "content.tabs.link",
    "content.action.edit",
]

[project.theme.icon]
repo = "fontawesome/brands/github"

# --- Color palette toggle (dark / light) ---

[[project.theme.palette]]
scheme = "slate"
primary = "teal"
accent = "cyan"
toggle.icon = "material/brightness-4"
toggle.name = "Switch to light mode"

[[project.theme.palette]]
scheme = "default"
primary = "teal"
accent = "cyan"
toggle.icon = "material/brightness-7"
toggle.name = "Switch to dark mode"

# ---------------------------------------------------------------------------
# Plugins
# ---------------------------------------------------------------------------

[project.plugins.autorefs]

[project.plugins.mkdocstrings.handlers.python]
paths = ["packages/src"]

[project.plugins.mkdocstrings.handlers.python.options]
show_source = true
show_root_heading = true
show_symbol_type_heading = true
members_order = "source"
show_signature_annotations = true
separate_signature = true
signature_crossrefs = true
merge_init_into_class = true
docstring_style = "google"

# ---------------------------------------------------------------------------
# Markdown extensions
# ---------------------------------------------------------------------------

# Admonitions (note, warning, tip, etc.)
[project.markdown_extensions.admonition]
[project.markdown_extensions.pymdownx.details]

# HTML / attribute extensions (required for grid cards, icon sizing)
[project.markdown_extensions.attr_list]
[project.markdown_extensions.md_in_html]

# Code blocks
[project.markdown_extensions.pymdownx.highlight]
anchor_linenums = true
line_spans = "__span"
pygments_lang_class = true

[project.markdown_extensions.pymdownx.inlinehilite]

[project.markdown_extensions.pymdownx.superfences]

[[project.markdown_extensions.pymdownx.superfences.custom_fences]]
name = "mermaid"
class = "mermaid"
format = "pymdownx.superfences.fence_code_format"

# Content tabs (e.g., showing Python / TypeScript side by side)
[project.markdown_extensions.pymdownx.tabbed]
alternate_style = true

# Typography and formatting
[project.markdown_extensions.pymdownx.mark]
[project.markdown_extensions.pymdownx.smartsymbols]
[project.markdown_extensions.pymdownx.keys]

# Lists and task lists
[project.markdown_extensions.def_list]
[project.markdown_extensions.pymdownx.tasklist]
custom_checkbox = true

# Table of contents
[project.markdown_extensions.toc]
permalink = true
toc_depth = 3

# Tables
[project.markdown_extensions.tables]

# Footnotes
[project.markdown_extensions.footnotes]

# Emoji (used sparingly for status indicators)
[project.markdown_extensions.pymdownx.emoji]
emoji_index = "zensical.extensions.emoji.twemoji"
emoji_generator = "zensical.extensions.emoji.to_svg"

# ---------------------------------------------------------------------------
# Extra
# ---------------------------------------------------------------------------

[[project.extra.social]]
icon = "fontawesome/brands/github"
link = "https://github.com/ff-fab/{{ _copier_answers.repo_name }}"
